<div class="catalogo-container">
  <h1>Cat√°logo GAMETIX</h1>

  @if (loading) {
    <p>Cargando productos desde el servidor...</p>
  } @else if (error) {
    <p style="color: red;">{{ error }}</p>
  } @else {
    <!-- Secci√≥n: Productos disponibles -->
    <h2>Productos disponibles</h2>
    <div class="grid">
      @for (producto of productosDestacados; track producto.id_producto) {
        <div class="card">
          <img [src]="producto.imagen ?? 'https://via.placeholder.com/300x300?text=Sin+Imagen'" [alt]="producto.name">
          <div class="info">
            <h3>{{ producto.name }}</h3>
            <p class="price">${{ producto.precio?.toLocaleString('es-CL') ?? 'Sin precio' }}</p>
            <p>{{ producto.description || 'Sin descripci√≥n' }}</p>
            <button class="btn-primary" (click)="agregarAlCarrito(producto)">Agregar al carrito</button>
			<button
			  class="btn-wishlist"
			  (click)="toggleListaDeseos(producto)">

			  @if (estaEnListaDeseos(producto.id_producto)) {
				Quitar de deseos ‚ù§Ô∏è
			  } @else {
				Agregar a deseos ü§ç
			  }

			</button>

          </div>
        </div>
      } @empty {
        <p>No hay productos disponibles.</p>
      }
    </div>

    <!-- Secci√≥n: Mejor valorados -->
    <h2>Mejor valorados</h2>
    <div class="grid">
      @for (producto of mejoresValorados; track producto.id_producto) {
        <div class="card">
          <img [src]="producto.imagen ?? 'https://via.placeholder.com/300x300?text=Sin+Imagen'" [alt]="producto.name">
          <div class="info">
            <h3>{{ producto.name }}</h3>
            <p class="price">${{ producto.precio?.toLocaleString('es-CL') ?? 'Sin precio' }}</p>
            @if (producto.puntuacion) {
              <p class="puntuacion">‚òÖ {{ producto.puntuacion }}</p>
            }
            <button class="btn-primary" (click)="agregarAlCarrito(producto)">Agregar al carrito</button>
			<button
			  class="btn-wishlist"
			  [class.activo]="estaEnListaDeseos(producto.id_producto)"
			  (click)="toggleListaDeseos(producto)">

			  @if (estaEnListaDeseos(producto.id_producto)) {
				Quitar de deseos ‚ù§Ô∏è
			  } @else {
				Agregar a deseos ü§ç
			  }

			</button>

          </div>
        </div>
      } @empty {
        <p>No hay productos con alta puntuaci√≥n.</p>
      }
    </div>
  }
</div>
