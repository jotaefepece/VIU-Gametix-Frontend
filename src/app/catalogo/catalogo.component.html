<div class="catalogo-container">
  <h1>Cat√°logo GAMETIX</h1>

  @if (loading) {
    <p>Cargando productos desde el servidor...</p>
  } @else if (error) {
    <p style="color: red;">{{ error }}</p>
  } @else {

    <h2>Productos disponibles</h2>

    <div class="grid">
      @for (producto of productosDestacados; track producto.id) {

        <a
          class="card link-card"
          [routerLink]="['/producto', producto.id]">

          <img
            [src]="producto?.imagen_url?.trim() ? producto.imagen_url : 'https://via.placeholder.com/300x300?text=Producto'"
            [alt]="producto.name" />

          <div class="info">
            <h3>{{ producto.name }}</h3>

            <p class="price">
              ${{ producto.price?.toLocaleString('es-CL') }}
            </p>

            <p>{{ producto.description || 'Sin descripci√≥n' }}</p>
            <p>Categor√≠a: {{ producto.category?.descripcion }}</p>
            <p>Empresa: {{ producto.company?.nombre }}</p>

            <p *ngIf="producto.stock === 0" style="color:red;">
              Sin stock
            </p>

            <button
              type="button"
              class="btn-wishlist"
              (click)="agregarALista(producto); $event.preventDefault(); $event.stopPropagation();">
              Agregar a deseos ü§ç
            </button>
          </div>

        </a>

      } @empty {
        <p>No hay productos disponibles.</p>
      }
    </div>

  }
</div>